<ion-view view-title="" cache-view="false">

  <ion-nav-buttons side="left">
    <label class="item item-input">
      <i class="icon ion-search placeholder-icon"></i>
      <input type="text" placeholder="検索" ng-model="searchKey.word"  ng-change="onSearchChange()" >
    </label>
  </ion-nav-buttons>


  <ion-nav-buttons side="right" ng-show="false">
    <!-- <button class="button button-icon button-clear ion-android-time " ui-sref="tab.timeline"></button> -->
    <button class="button button-icon button-clear ion-ios-plus-empty" ng-click="$root.modalAction='add';$root.modalContent=[];threadModal.show();">
    </button>
  </ion-nav-buttons>

  <ion-content ng-show="showSearchList">
    <ion-list>
      <ion-item style="padding:0px;padding-left:8px;background:#f0f0f0;">
        <span style="font-size:80%;">メンバー<span>
      </ion-item>
      <ion-item  ng-repeat="users in searchUsers" ng-click="createChat(users.User)" ng-if="users.User.username">
        <i class="icon ion-person"> </i>{{users.User.username}}
      </ion-item>
    </ion-list>
    <ion-list>
      <ion-item style="padding:0px;padding-left:8px;background:#f0f0f0;">
        <span style="font-size:80%;">メッセージ<span>
      </ion-item>
      <ion-item  ng-repeat="chat in searchChats" ng-click="viewChatHistory(chat.Message.groupchat_id,chat.Message.id)">
        <i class="icon ion-chatbox"></i> <span style="font-size: 15px;font-weight: 500;" ng-if="chat.User.id!=$root.user_id">{{chat.User.username}}:</span><span style="font-size: 15px;font-weight: 500;" ng-if="chat.User.id==$root.user_id">You:</span>
        <p style="font-size: 12px;padding-left: 20px;">{{chat.Message.body}}</p>
      </ion-item>
    </ion-list>
    <ion-list>
      <ion-item style="padding:0px;padding-left:8px;background:#f0f0f0;">
        <span style="font-size:80%;">グループ<span>
      </ion-item>
      <ion-item  ng-repeat="threads in searchThreads" href="#/tab/group-detail/{{threads.Thread.id}}" ng-if="threads.Thread.title">
        <i class="icon ion-ios-people"></i> {{threads.Thread.title}}
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-item style="padding:0px;padding-left:8px;background:#f0f0f0;">
        <span style="font-size:80%;">投稿<span>
      </ion-item>
      <ion-item  ng-repeat="heads in searchHeads track by $index" href="#/tab/head/{{heads.Head.id}}" ng-if="heads.Head.body">
        <i class="icon ion-pin"></i> {{heads.Head.body}}
      </ion-item>
    </ion-list>
  </ion-content>

  <ion-content ng-show="showGroupList">

  <!-- <div class="item item-divider item-stable">
       <center>Groups</center>



  </div>

   <ion-list ng-show="showGroupList">
      <ion-item ng-click="$root.groupTitle=group.Thread.title" ng-class="{'forall':group.Thread.user_id == 0,'customgroup':group.Thread.user_id != 0}" class="item-remove-animate item-icon-left item-icon-right" ng-show="groups.length > 0" ng-repeat="group in groups track by $index" type="item-text-wrap" href="#/tab/group-detail/{{group.Thread.id}}" >
        <i ng-if="group.Thread.user_id != 0" class="icon ion-ios-people"></i>
        <div ng-if="group.Thread.user_id == 0" class="group-wrapper"><div class="group-icon"></div></div>
        <h2>{{group.Thread.title}}</h2>
         <span ng-show="$root.threadNotif[group.Thread.id]" style="position:absolute;right:25%" class="badge badge-assertive" show-badge badge-id="{{group.Thread.id}}" badge-type="thread">{{$root.threadNotif[group.Thread.id]}}</span>
        <a href prevent-href="true" ng-show="group.Thread.user_id==$root.user_id" style="position: absolute;top: 25px;right: 40px;">
          <i  class="icon ion-compose" ng-click="showPopover($event,$index)" style="font-size: 30px;color: #444;"></i>
        </a>
        <a href prevent-href="true" style="position: absolute;top: 25px;right: 35px;">
          <i  class="icon ion-log-out" ng-show="group.Thread.user_id!=$root.user_id" ng-click="leave($index)" style="font-size: 30px;color: #444;"></i>
       </a>
     </a>
        <label class="toggle toggle-calm" style="position: absolute;top: 9px;right: 40px;">
           <input ng-change="notifSettings({{$index}})" type="checkbox" ng-model="group.Thread.notIgnored">
           <div class="track">
               <div class="handle"></div>
           </div>
       </label>

      </ion-item>

     <div ng-show="groups.length == 0" style="font-size: 30px;text-align: center;padding: 30%;" class="row">
  </div> -->
  <ion-list>
    <ion-item class="item-remove-animate item-icon-left item-icon-right" ui-sref="tab.timeline">
      <i class="icon ion-ios-browsers-outline"></i>
      タイムライン
      <i class="icon ion-chevron-right icon-accessory"></i>
    </ion-item>
  </ion-list>
  <ion-list>
    <ion-item style="padding:0px;padding-left:8px;background:#f0f0f0;">
      <span style="font-size:80%;">グループ<span>
    </ion-item>

    <ion-item ng-click="$root.groupTitle=group.Thread.title" class="item-remove-animate item-icon-left item-icon-right" ng-show="groups.length > 0" ng-repeat="group in groups track by $index" type="item-text-wrap" href="#/tab/group-detail/{{group.Thread.id}}" >
      <i ng-if="group.Thread.user_id != 0" class="icon ion-ios-people"></i>
      <div ng-if="group.Thread.user_id == 0" class="group-icon"></div>
      <span style="white-space: normal;">{{group.Thread.title}}</span>
      <span ng-show="$root.threadNotif[group.Thread.id]" class="badge badge-assertive" show-badge badge-id="{{group.Thread.id}}" badge-type="thread">{{$root.threadNotif[group.Thread.id]}}</span>
      <!-- <a href prevent-href="true" ng-show="group.Thread.user_id==$root.user_id" style="position: absolute;top: 25px;right: 30px;">
        <i  class="icon ion-compose" ng-click="showPopover($event,$index)" style="font-size: 30px;color: #444;"></i>
      </a> -->
      <i class="icon ion-chevron-right icon-accessory"></i>
      <!-- <a href prevent-href="true" style="position: absolute;top: 27px;right: 35px;">
        <i  class="icon ion-log-out" ng-show="group.Thread.user_id!=$root.user_id" ng-click="leave($index)" style="font-size: 28px;color: #444;"></i>
      </a> -->
      <!-- <label prevent-href="true" class="toggle toggle-calm" style="position: absolute;top: 10px;right: 40px;">
        <input ng-change="notifSettings({{$index}})" type="checkbox" ng-model="group.Thread.notIgnored">
        <div class="track">
          <div class="handle"></div>
        </div>
      </label> -->

    </ion-item>

     <!-- <div ng-show="groups.length == 0" style="font-size: 30px;text-align: center;padding: 30%;" class="row">
         No Posts
      </div> -->

  </ion-list>


  </ion-content>
</ion-view>
