<ion-modal-view>
   <ion-header-bar class="bar bar-stable">
       <div class="buttons">
          <button class="button button-center button-outline button-bar-side" ng-click="resetForm()"><span class="fixbuttontext">キャンセル</span></button>
      </div>
      <h1 class="title">メンバーを選択 <span style="font-size:14px;"> ({{$root.addedUsernames.length}})</span></h1>
      <div class="buttons">
          <button class="button button-center button-outline button-bar-side" ng-class="{'disabled': $root.addedUsernames==0}" ng-click="createGroupChat()"><span class="fixbuttontext">決定</span></button>
      </div>
    </ion-header-bar>
    <ion-header-bar class="bar-light bar-subheader" ng-init="userFilter=''">
      <!-- <span style="position: absolute;left: 10px;margin-top: 10px;font-size: 15px;">フィルター:</span> -->
      <input class="searchinput" type="search" id="searchUserChat" ng-model="$root.usersToadd" ng-focus="searchFocused = true"
             ng-blur="searchFocused = false" ng-keyup="checkSearch($event)"
             placeholder="メンバーを検索" class="full-width chatsearch searchinput">
    </ion-header-bar>
    <ion-content class="has-subheader">
      <ion-item style="padding:0px;padding-left:8px;background:#f0f0f0;">
        <span style="font-size:80%;">選択したメンバー</span>
      </ion-item>
        <div ng-show="$root.addedUsernames.length > 0">
          <a class="item item-icon-left" href="" collection-repeat="user in $root.addedUsernames track by $index">
            <i class="icon ion-ios-close-outline" ng-click="removeUserChat($index)"></i>
            <span class="shingodb" style="font-size:13px">{{user}}
          </a>
        </div>
        <ion-item style="padding:0px;padding-left:8px;background:#f0f0f0;">
          <span style="font-size:80%;">メンバー</span>
        </ion-item>
        <div class="list">
            <a class="item item-avatar item-icon-right" href="" ng-click="selectAll()">
                <img src="img/avatar.png">

                <span class="shingodb" style="font-size:13px">全選択</span>
                <i ng-show="selectingAll" class="icon ion-checkmark-round"></i>
            </a>
            <a class="item item-avatar item-icon-right" href="" ng-click="addUser(user)" ng-repeat="user in users | filter:{User:{username:$root.usersToadd}} track by $index" ng-if="user.User.username">
              <img src="img/avatar.png" ng-show="user.User.avatar_img==''||user.User.avatar_img=='null'||user.User.avatar_img==null">
              <img class="avatar" ng-src="{{base_url}}{{user.User.avatar_img}}" ng-show="user.User.avatar_img!=''&&user.User.avatar_img!='null'&&user.User.avatar_img!=null">
              <span class="shingodb" style="font-size:13px;vertical-align:middle;line-height: 38px;">{{user.User.username}}</span>
              <i ng-show="$root.addedUserIds.indexOf(user.User.id) > -1" class="icon ion-checkmark-round"></i>
            </a>
        </div>
        <!-- <ion-infinite-scroll ng-if="numberOfUsersToDisplay < users.length" on-infinite="loadMoreUsers()" distance="1%"></ion-infinite-scroll> -->
    </ion-content>
  </ion-modal-view>
