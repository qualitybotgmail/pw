!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=.3,i=.04,u=.11,r=function s(e){function t(){b.call(w,H,J)}function r(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function d(e){var t=r(e);O||Q||(O=!0,W=!1,C=t.id,$=null,P=U=t.x,R=V=t.y,Z=[],f(P,R),document.addEventListener("touchmove",a),document.addEventListener("touchend",v),document.addEventListener("touchcancel",m),document.addEventListener("mousemove",a),document.addEventListener("mouseup",v))}function a(e){var t=r(e);X&&!$&&($=W?X:Math.abs(P-t.x)>Math.abs(R-t.y)?"horizontal":"vertical"),X&&$!==X||(e.preventDefault(),O&&t.id===C&&(U=t.x,V=t.y,f(P,R),y()))}function v(e){var t=r(e);t.id===C&&m()}function m(){O=!1,f(P,R),x(),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",v),document.removeEventListener("touchcancel",m),document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",a)}function f(e,t){for(var n=Date.now();Z.length>0&&!(n-Z[0].time<=100);)Z.shift();Z.push({x:e,y:t,time:n})}function l(){var e=U-P,n=V-R;if(H+=e*T,J+=n*T,S){var o=p();0!==o.x&&(H-=e*h(o.x)*T),0!==o.y&&(J-=n*h(o.y)*T)}else p(!0);t(),P=U,R=V,N=!1}function h(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function y(){N||c(l),N=!0}function p(e){var t=0,n=0;return void 0!==Y&&Y>H?t=Y-H:void 0!==k&&H>k&&(t=k-H),void 0!==z&&z>J?n=z-J:void 0!==D&&J>D&&(n=D-J),e&&(0!==t&&(H=t>0?Y:k),0!==n&&(J=n>0?z:D)),{x:t,y:n,inBounds:0===t&&0===n}}function x(){var e=Z[0],t=Z[Z.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/T;j=n/u||0,G=o/u||0;var r=p();(Math.abs(j)>1||Math.abs(G)>1||!r.inBounds)&&(W=!0,c(E))}function E(){if(W){j*=q,G*=q,H+=j,J+=G;var e=p();if(Math.abs(j)>K||Math.abs(G)>K||!e.inBounds){if(S){var n=2.5;if(0!==e.x)if(e.x*j<=0)j+=e.x*i;else{var o=e.x>0?n:-n;j=(e.x+o)*u}if(0!==e.y)if(e.y*G<=0)G+=e.y*i;else{var o=e.y>0?n:-n;G=(e.y+o)*u}}else 0!==e.x&&(H=e.x>0?Y:k,j=0),0!==e.y&&(J=e.y>0?z:D,G=0);t(),c(E)}else W=!1}}var L=e.source,w=void 0===L?document:L,b=e.update,M=e.multiplier,T=void 0===M?1:M,g=e.friction,q=void 0===g?.92:g,A=e.initialValues,B=e.boundX,F=e.boundY,I=e.bounce,S=void 0===I?!0:I,X=e.directionLock;n(this,s);var Y,k,z,D,P,R,U,V,C,j,G,H=0,J=0,K=o*T,N=!1,O=!1,Q=!1,W=!1,Z=[],$=null;!function(){if(w="string"==typeof w?document.querySelector(w):w,!w)throw new Error("IMPETUS: source not found.");if(!b)throw new Error("IMPETUS: update function not defined.");A&&(A[0]&&(H=A[0]),A[1]&&(J=A[1]),t()),B&&(Y=B[0],k=B[1]),F&&(z=F[0],D=F[1]),w.addEventListener("touchstart",d),w.addEventListener("mousedown",d)}(),this.pause=function(){O=!1,Q=!0},this.resume=function(){Q=!1},this.destroy=function(){w.removeEventListener("touchstart",d),w.removeEventListener("mousedown",d),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",v),document.removeEventListener("touchcancel",m),document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",a)},this.setValues=function(e,t){"number"==typeof e&&(H=e),"number"==typeof t&&(J=t)},this.setMultiplier=function(e){T=e,K=o*T}};t.exports=r;var c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});