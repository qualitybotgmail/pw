<style type="text/css">
    .thread-users span.comma:last-child {
        display: 'none';
    }
    .liked {
        font-weight: bolder;
        background: blue;
    }
    .badge-delete .badge {
        background-color: #d9534f!important;
    }
    .badge-edit .badge {
        background-color: #2a6496!important;
    }
    .badge-like,
    .badge-edit,
    .badge-delete,
    .add-member {
        cursor: pointer;
    }
    
</style>


<div class="panel colourable" id="message-{{groupchat.Groupchat.id}}" ng-if="groupchat.Groupchat" ng-repeat="(groupChatIndex,groupchat) in createdGroupChats" ng-init="$last && fireMessageActiveEvent()">
    <div class="panel-heading">
        <span class="panel-title">
            <div>
                <label class="lead">
                    <a class="clickable" ng-click="goto.message(groupchat.Groupchat)">
                        <!--投稿メンバー-->
                        <span class="thread-users" title="members">
                        	<i class="glyphicon glyphicon-user"></i>
                        	<span>:</span>
                        	<!--<span>-->
                        	<!--	<b>You</b>,&nbsp;-->
                        	<!--</span>-->
                        	<span ng-repeat="u in groupchat.User | limitTo: groupchat.noOfUserToView ">
                                {{u.username}}
                                {{$last ? '' : ', '}}
                                <span class="btn btn-xs btn-primary" ng-if="groupchat.noOfUserToView < groupchat.User.length && $last" ng-click="loadUser(groupChatIndex, groupchat)">
                                    more...
                                </span>
                                <span class="btn btn-xs btn-warning" ng-if="groupchat.noOfUserToView > groupchat.User.length && $last" ng-click="hideUser(groupChatIndex, groupchat)">
                                    hide
                                </span>
                            </span>
                        </span>
                    </a>
                    <span class="badge badge-info" ng-if="groupchat.Groupchat.notifications">{{groupchat.Groupchat.notifications}}</span>
                </label>
            </div>
            <span>
                <p class="message-description" ng-repeat="g in groupchat.Message" ng-if="$last">
                    {{g.body}}
                    <br/>
                    <span>
                        <span ng-repeat="upload in g.Upload">
                            <span ng-init="upload.isFileImage=checkFile(upload.path)"></span>
                            <a ng-href="{{upload.path}}" target="_blank" ng-if="!upload.isFileImage">
                              {{upload.name}}
                            </a>
                            <a fancybox ng-href="{{upload.path}}" ng-if="upload.isFileImage">
                                <img ng-src="{{upload.path}}" class="img-responsive thumbnail" width="150" height="50"></img>
                            </a>
                        </span>
                    </span>
                </p>
            </span>
            <br>
            <span>
                <p ng-repeat="g in groupchat.Message" ng-if="$last">
                    {{g.created}}
                </p>
            </span>
        </span>
    <div>
    <!--<span class="badge badge-info" ng-if="groupchat.Groupchat.notifications">-->
    <!--    {{groupchat.Groupchat.notifications}}-->
    <!--</span>-->
</a>

<div ng-repeat="template in templates" ng-include="template"></div>