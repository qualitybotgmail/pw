<!-- Notifications -->
<div gritter={{gritter.notify}} gritter-options="gritter.options" gritter-remove={{gritter.remove}} gritter-remove-all={{gritter.removeAll}} gritter-ids="gritter.ids" gritter-destroy={{gritter.destroy}}>
</div>

<div focus="focus"></div>
<div blocker="blocker"></div>

<div jwerty="HOME" key-event="goto.home()" key-name="goto.home" key-bind="document"></div>
<div jwerty="CTRL+END" key-event="goto.logout()" key-name="goto.logout" key-bind="document"></div>

<div jwerty="F1" key-event="goto.thread()" key-name="goto.thread" key-bind="document"></div>
<div jwerty="F2" key-event="goto.timeline()" key-name="goto.timeline" key-bind="document"></div>

<div class="section col-sm-2">
    <a >
        <h3 class="company-name">
            Back Office
        </h3>    
    </a>
    <h4>
        <a ui-sref="app.threads">
            スレッド
        </a>
        <a style="float:right;" ng-click="addThread()">
            <i class="fa fa-plus-square-o clickable"></i>
        </a>
    </h4>
    
    <ul class="list-group">
      <a class="list-group-item clickable" ng-if="thread.Thread" ui-sref="app.thread({ id: thread.Thread.id })" ng-repeat="thread in threads">
        <span class="badge badge-info">{{thread.Head.length}}</span>
        {{thread.Thread.title}}
      </a>
    </ul>

    <h4>
        メッセージ
        <a style="float:right;" ng-click="addGroupChat()">
            <i class="fa fa-plus-square-o clickable"></i>
        </a>
    </h4>
    <ul class="list-group">
      <a class="list-group-item clickable" ng-repeat="groupchat in createdGroupChats" ui-sref="app.message({ id: groupchat.Groupchat.id })">
        <span class="badge badge-info">{{groupchat.User.length}}</span>
        <span ng-repeat="u in groupchat.User">
            {{u.username}}
            {{$last ? '' : ', '}}
        </span>
      </a>
      
    </ul>
      
</div>

<div class="section col-sm-8">
    <div class="row" style="margin-bottom:17px;">
      <form action="" class="col-xs-12 col-sm-6">
        <div class="input-group">
          <span class="input-group-addon" style="border:none;background: #fff;background: rgba(0,0,0,.03);"><i class="fa fa-search"></i></span>
          <input type="text" placeholder="Search..." class="form-control no-padding-hr" style="border:none;background: #fff;background: rgba(0,0,0,.03);">
        </div>
      </form>
    </div>
    <div ui-view="content"></div>
</div>

<div class="section col-sm-2">
    <div class="nav pull-right">
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <span>{{loginUser.username}}</span>
                </span>&nbsp;<span class="fa fa-caret-down"></span>
            </a>
            <ul class="dropdown-menu">
                <li>
                    <a href="#">
                        Profile
                    </a>
                </li>
                <li>
                    <a ui-sref="app.threads">
                        <i class="dropdown-icon fa fa-cog"></i>
                        &nbsp;&nbsp;Settings
                    </a>
                </li>
                <li class="divider"></li>
                <li>
                    <a href="/users/logout">
                        <i class="dropdown-icon fa fa-power-off"></i>
                        &nbsp;&nbsp;Log out
                    </a>
                </li>
            </ul>
        </li>
    </div>
</div>

<div ng-repeat="template in templates" ng-include="template"></div>