<style type="text/css">
    .thread-users span.comma:last-child {
        display: 'none';
    }
    .liked {
        font-weight: bolder;
        background: blue;
    }
    .badge-like,
    .add-member {
        cursor: pointer;
    }
    
</style>


<div class="panel colourable">
    <div class="panel-heading">
        <span class="panel-title">
            <div>
                <small>
                    {{selectedHead.Thread.title}}
                </small>
                <label class="lead">
                    {{selectedHead.Head.body}}
                </label>
            </div>
            
            <br>
            <span style="font-size:11px;">
                {{selectedHead.Thread.created}}
            </span>
        </span>
        <div class="panel-heading-controls">
            <button class="btn btn-sm {{(selectedHead.Head.isUserLiked)?'':'btn-outline'}} btn-warning" ng-disabled="selectedHead.Head.processing" ng-click="like($index, selectedHead.Head)">
                 {{selectedHead.Head.likes}}
                <span class="fa fa-thumbs-o-up"></span>
            </button>
            
            <div class="btn-group btn-group-sm">
              <button class="btn btn-info dropdown-toggle" type="button" data-toggle="dropdown"><span class="fa fa-cog"></span>&nbsp;<span class="fa fa-caret-down"></span></button>
              <ul class="dropdown-menu dropdown-menu-right">
                <li><a href="#">編集</a></li>
                <li><a href="#">削除</a></li>
              </ul> <!-- / .dropdown-menu -->
            </div> <!-- / .btn-group -->
        </div> <!-- / .panel-heading-controls -->
    </div> <!-- / .panel-heading -->
    <ul class="list-group">
        <li class="list-group-item" ng-repeat="c in selectedHead.Comment | unique : 'id'" ng-init="$last && fireMessageEvent()">
            <small>by : {{c.User.username}}</small>
            <p>{{c.body}}</p>
            <p>
                 <span ng-repeat="upload in c.Upload">
                    <a fancybox ng-href="{{upload.path}}">
                        <img ng-src="{{upload.path}}" class="img-responsive thumbnail" width="150" height="50"></img>
                    </a>
                </span>
            </p>
            <span style="font-size:10px;">{{c.created}}</span>
            <button class="btn btn-xs {{(c.isUserLiked)?'':'btn-outline'}} btn-warning pull-right" ng-disabled="c.processing" ng-click="likeComment($index, c)">
                {{c.likes}}
                <span class="fa fa-thumbs-o-up"></span>
            </button>
        </li>
        <li class="list-group-item form-group">
            <form  role="form" id="commentFrm" name="commentFrm" method="POST" enctype="multipart/form-data" 
                        novalidate ng-submit="sendComment()">
                
                <input type="text" name="data[Upload][comment_id]" class="hidden" id="comment-id" ng-model="comment.comment_id" />
                <input type="file" name="data[Upload][file]" id="attachments"  multiple />
                <textarea name="data[Upload][body]" class="form-control" id="body" placeholder="共有したい情報を投稿" ng-model="comment.body"></textarea>
                <button type="submit" class="btn btn-sm btn-primary pull-right" style="margin-top:4px;">コメント</button>
                
            </form>
        </li>
    </ul>
</div> <!-- / .panel -->

<div ng-repeat="template in templates" ng-include="template"></div>