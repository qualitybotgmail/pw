!function(t){"use strict";var e=function(t,n,r){var i,o,a=document.createElement("img");if(a.onerror=n,a.onload=function(){!o||r&&r.noRevoke||e.revokeObjectURL(o),n&&n(e.scale(a,r))},e.isInstanceOf("Blob",t)||e.isInstanceOf("File",t))i=o=e.createObjectURL(t),a._type=t.type;else{if("string"!=typeof t)return!1;i=t,r&&r.crossOrigin&&(a.crossOrigin=r.crossOrigin)}return i?(a.src=i,a):e.readFile(t,function(t){var e=t.target;e&&e.result?a.src=e.result:n&&n(t)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;e.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},e.transformCoordinates=function(){},e.getTransformedOptions=function(t,e){var n,r,i,o,a=e.aspectRatio;if(!a)return e;n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.crop=!0,i=t.naturalWidth||t.width,o=t.naturalHeight||t.height,i/o>a?(n.maxWidth=o*a,n.maxHeight=o):(n.maxWidth=i,n.maxHeight=i/a),n},e.renderImageToCanvas=function(t,e,n,r,i,o,a,c,d,s){return t.getContext("2d").drawImage(e,n,r,i,o,a,c,d,s),t},e.hasCanvasOption=function(t){return t.canvas||t.crop||t.aspectRatio},e.scale=function(t,n){n=n||{};var r,i,o,a,c,d,s,u,f,h=document.createElement("canvas"),g=t.getContext||e.hasCanvasOption(n)&&h.getContext,v=t.naturalWidth||t.width,m=t.naturalHeight||t.height,l=v,O=m,p=function(){var t=Math.max((o||l)/l,(a||O)/O);t>1&&(l*=t,O*=t)},w=function(){var t=Math.min((r||l)/l,(i||O)/O);1>t&&(l*=t,O*=t)};return g&&(n=e.getTransformedOptions(t,n),s=n.left||0,u=n.top||0,n.sourceWidth?(c=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(s=v-c-n.right)):c=v-s-(n.right||0),n.sourceHeight?(d=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(u=m-d-n.bottom)):d=m-u-(n.bottom||0),l=c,O=d),r=n.maxWidth,i=n.maxHeight,o=n.minWidth,a=n.minHeight,g&&r&&i&&n.crop?(l=r,O=i,f=c/d-r/i,0>f?(d=i*c/r,void 0===n.top&&void 0===n.bottom&&(u=(m-d)/2)):f>0&&(c=r*d/i,void 0===n.left&&void 0===n.right&&(s=(v-c)/2))):((n.contain||n.cover)&&(o=r=r||o,a=i=i||a),n.cover?(w(),p()):(p(),w())),g?(h.width=l,h.height=O,e.transformCoordinates(h,n),e.renderImageToCanvas(h,t,s,u,c,d,0,0,l,O)):(t.width=l,t.height=O,t)},e.createObjectURL=function(t){return n?n.createObjectURL(t):!1},e.revokeObjectURL=function(t){return n?n.revokeObjectURL(t):!1},e.readFile=function(t,e,n){if(window.FileReader){var r=new FileReader;if(r.onload=r.onerror=e,n=n||"readAsDataURL",r[n])return r[n](t),r}return!1},"function"==typeof define&&define.amd?define(function(){return e}):t.loadImage=e}(this);